openapi: 3.0.0
info:
    title: School Management System API
    description: API documentation for the School Management System.

components:
    securitySchemes:
        tokenAuth:
            type: apiKey
            in: header
            name: token

paths:
    #####################
    # Auth Endpoints
    #####################
    /api/auth/signup:
        post:
            tags:
                - Auth
            summary: User Signup
            description: Allows a new user to register by providing their username, password, email, and name.
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                username:
                                    type: string
                                password:
                                    type: string
                                email:
                                    type: string
                                name:
                                    type: string
                            required:
                                - username
                                - password
            responses:
                '200':
                    description: User sign up successful.
                    content:
                        application/json:
                            examples:
                                success:
                                    summary: Successful Response
                                    value:
                                        ok: boolean
                                        data:
                                            user:
                                                id: string
                                                username: string
                                                email: string
                                                name: string
                                                role: string
                                            longToken: string
                                        errors: []
                                        message: string
                '400 - 499':
                    description: User sign up failed.
                    content:
                        application/json:
                            examples:
                                failure:
                                    summary: Failure Response
                                    value:
                                        ok: boolean
                                        data: {}
                                        errors:
                                            oneOf:
                                                - [string]
                                                - string
                                        message: string
    /api/auth/login:
        post:
            tags:
                - Auth
            summary: User Login
            description: Authenticates a user using their username and password.
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                username:
                                    type: string
                                password:
                                    type: string
                            required:
                                - username
                                - password
            responses:
                '200':
                    description: User login successful.
                    content:
                        application/json:
                            examples:
                                success:
                                    summary: Successful Response
                                    value:
                                        ok: boolean
                                        data:
                                            user:
                                                id: string
                                                username: string
                                                email: string
                                                name: string
                                                role: string
                                            shortToken: string
                                        errors: []
                                        message: string
                '400 - 499':
                    description: User login failed.
                    content:
                        application/json:
                            examples:
                                failure:
                                    summary: Failure Response
                                    value:
                                        ok: boolean
                                        data: {}
                                        errors:
                                            oneOf:
                                                - [string]
                                                - string
                                        message: string
    /api/auth/logout:
        post:
            tags:
                - Auth
            summary: User Logout
            description: Logs out the authenticated user, invalidating their session token.
            parameters:
                - in: header
                  name: token
                  schema:
                      type: string
                  required: true
                  description: Short token returned on login.
            responses:
                '200':
                    description: User logout successful.
                    content:
                        application/json:
                            examples:
                                success:
                                    summary: Successful Response
                                    value:
                                        ok: boolean
                                        data: {}
                                        errors: []
                                        message: string
                '400 - 499':
                    description: User logout failed.
                    content:
                        application/json:
                            examples:
                                failure:
                                    summary: Failure Response
                                    value:
                                        ok: boolean
                                        data: {}
                                        errors:
                                            oneOf:
                                                - [string]
                                                - string
                                        message: string
            security:
                - tokenAuth: []
    #####################
    # User Endpoints
    #####################
    /api/user/newUser:
        post:
            tags:
                - User
            summary: Create New User
            description: Creates a new user account by an authenticated administrator.
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                username:
                                    type: string
                                password:
                                    type: string
                                email:
                                    type: string
                                name:
                                    type: string
                            required:
                                - username
                                - password
            responses:
                '200':
                    description: User creation successful.
                    content:
                        application/json:
                            examples:
                                success:
                                    summary: Successful Response
                                    value:
                                        ok: boolean
                                        data:
                                            user:
                                                id: string
                                                username: string
                                                email: string
                                                name: string
                                                role: string
                                            longToken: string
                                        errors: []
                                        message: string
                '400 - 499':
                    description: User creation failed.
                    content:
                        application/json:
                            examples:
                                failure:
                                    summary: Failure Response
                                    value:
                                        ok: boolean
                                        data: {}
                                        errors:
                                            oneOf:
                                                - [string]
                                                - string
                                        message: string
            security:
                - tokenAuth: []
    /api/user/getUsers:
        get:
            tags:
                - User
            summary: Get All Users
            description: Retrieves a list of all users in the system.
            responses:
                '200':
                    description: User list retrieval successful.
                    content:
                        application/json:
                            examples:
                                success:
                                    summary: Successful Response
                                    value:
                                        ok: boolean
                                        data:
                                            type: array
                                            items:
                                                id: string
                                                username: string
                                                email: string
                                                name: string
                                                role: string
                                        errors: []
                                        message: string
                '400 - 499':
                    description: User list retrieval failed.
                    content:
                        application/json:
                            examples:
                                failure:
                                    summary: Failure Response
                                    value:
                                        ok: boolean
                                        data: {}
                                        errors:
                                            oneOf:
                                                - [string]
                                                - string
                                        message: string
            security:
                - tokenAuth: []
    /api/user/findUser:
        get:
            tags:
                - User
            summary: Find User by Username
            description: Fetches details of a specific user based on their username.
            parameters:
                - in: query
                  name: username
                  schema:
                      type: string
                  required: true
                  description: Username to search for.
            responses:
                '200':
                    description: User retrieval successful.
                    content:
                        application/json:
                            examples:
                                success:
                                    summary: Successful Response
                                    value:
                                        ok: boolean
                                        data:
                                            id: string
                                            username: string
                                            email: string
                                            name: string
                                            role: string
                                        errors: []
                                        message: string
                '400 - 499':
                    description: User retrieval failed.
                    content:
                        application/json:
                            examples:
                                failure:
                                    summary: Failure Response
                                    value:
                                        ok: boolean
                                        data: {}
                                        errors:
                                            oneOf:
                                                - [string]
                                                - string
                                        message: string
            security:
                - tokenAuth: []
    /api/user/changeUserRole:
        patch:
            tags:
                - User
            summary: Change User Role
            description: Updates the role of a specified user.
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                username:
                                    type: string
                                role:
                                    type: string
                            required:
                                - username
                                - role
            responses:
                '200':
                    description: User role update successful.
                    content:
                        application/json:
                            examples:
                                success:
                                    summary: Successful Response
                                    value:
                                        ok: boolean
                                        data:
                                            id: string
                                            username: string
                                            email: string
                                            name: string
                                            role: string
                                        errors: []
                                        message: string
                '400 - 499':
                    description: User role update failed.
                    content:
                        application/json:
                            examples:
                                failure:
                                    summary: Failure Response
                                    value:
                                        ok: boolean
                                        data: {}
                                        errors:
                                            oneOf:
                                                - [string]
                                                - string
                                        message: string
            security:
                - tokenAuth: []
    /api/user/deleteUser:
        delete:
            tags:
                - User
            summary: Delete User
            description: Removes a user from the system.
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                username:
                                    type: string
                            required:
                                - username
            responses:
                '200':
                    description: User retrieval successful.
                    content:
                        application/json:
                            examples:
                                success:
                                    summary: Successful Response
                                    value:
                                        ok: boolean
                                        data:
                                            id: string
                                            username: string
                                            email: string
                                            name: string
                                            role: string
                                        errors: []
                                        message: string
                '400 - 499':
                    description: User retrieval failed.
                    content:
                        application/json:
                            examples:
                                failure:
                                    summary: Failure Response
                                    value:
                                        ok: boolean
                                        data: {}
                                        errors:
                                            oneOf:
                                                - [string]
                                                - string
                                        message: string
            security:
                - tokenAuth: []
    #####################
    # School Endpoints
    #####################
    /api/school/createSchool:
        post:
            tags:
                - School
            summary: Create School
            description: Adds a new school to the system with its details and administrators.
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                name:
                                    type: string
                                desc:
                                    type: string
                                administrators:
                                    type: array
                                    items:
                                        type: string
                            required:
                                - name
                                - desc
            responses:
                '200':
                    description: School created successfully.
                    content:
                        application/json:
                            examples:
                                success:
                                    summary: Successful Response
                                    value:
                                        ok: boolean
                                        data:
                                            _id: string
                                            slug: string
                                            name: string
                                            desc: string
                                            administrators:
                                                type: array
                                                items:
                                                    type: string
                                            createdAt: string
                                            updatedAt: string
                                        errors: []
                                        message: string
                '400 - 499':
                    description: School creation failed.
                    content:
                        application/json:
                            examples:
                                failure:
                                    summary: Failure Response
                                    value:
                                        ok: boolean
                                        data: {}
                                        errors:
                                            oneOf:
                                                - [string]
                                                - string
                                        message: string
            security:
                - tokenAuth: []
    /api/school/getSchools:
        get:
            tags:
                - School
            summary: Get All Schools
            description: Retrieves a list of all schools available in the system.
            responses:
                '200':
                    description: School list retrieval successful.
                    content:
                        application/json:
                            examples:
                                success:
                                    summary: Successful Response
                                    value:
                                        ok: boolean
                                        data:
                                            type: array
                                            items:
                                                _id: string
                                                slug: string
                                                name: string
                                                desc: string
                                                administrators:
                                                    type: array
                                                    items:
                                                        type: string
                                                createdAt: string
                                                updatedAt: string
                                        errors: []
                                        message: string
                '400 - 499':
                    description: School list retrieval failed.
                    content:
                        application/json:
                            examples:
                                failure:
                                    summary: Failure Response
                                    value:
                                        ok: boolean
                                        data: {}
                                        errors:
                                            oneOf:
                                                - [string]
                                                - string
                                        message: string
            security:
                - tokenAuth: []
    /api/school/findSchool:
        get:
            tags:
                - School
            summary: Find School by Slug
            description: Fetches details of a specific school using its slug.
            parameters:
                - in: query
                  name: slug
                  schema:
                      type: string
                  required: true
                  description: Slug of the school.
            responses:
                '200':
                    description: School details retrieval successful.
                    content:
                        application/json:
                            examples:
                                success:
                                    summary: Successful Response
                                    value:
                                        ok: boolean
                                        data:
                                            _id: string
                                            slug: string
                                            name: string
                                            desc: string
                                            administrators:
                                                type: array
                                                items:
                                                    type: string
                                            createdAt: string
                                            updatedAt: string
                                        errors: []
                                        message: string
                '400 - 499':
                    description: School details retrieval failed.
                    content:
                        application/json:
                            examples:
                                failure:
                                    summary: Failure Response
                                    value:
                                        ok: boolean
                                        data: {}
                                        errors:
                                            oneOf:
                                                - [string]
                                                - string
                                        message: string
            security:
                - tokenAuth: []
    /api/school/updateSchool:
        patch:
            tags:
                - School
            summary: Update School Details
            description: Updates the details of a school.
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                id:
                                    type: string
                                name:
                                    type: string
                                desc:
                                    type: string
                                administrators:
                                    type: array
                                    items:
                                        type: string
                            required:
                                - id
            responses:
                '200':
                    description: School updated successfully.
                    content:
                        application/json:
                            examples:
                                success:
                                    summary: Successful Response
                                    value:
                                        ok: boolean
                                        data:
                                            _id: string
                                            slug: string
                                            name: string
                                            desc: string
                                            administrators:
                                                type: array
                                                items:
                                                    type: string
                                            createdAt: string
                                            updatedAt: string
                                        errors: []
                                        message: string
                '400 - 499':
                    description: School update failed.
                    content:
                        application/json:
                            examples:
                                failure:
                                    summary: Failure Response
                                    value:
                                        ok: boolean
                                        data: {}
                                        errors:
                                            oneOf:
                                                - [string]
                                                - string
                                        message: string
            security:
                - tokenAuth: []
    /api/school/deleteSchool:
        delete:
            tags:
                - School
            summary: Delete School
            description: Deletes a specific school from the system.
            parameters:
                - in: query
                  name: slug
                  schema:
                      type: string
                  required: true
                  description: Slug of the school.
            responses:
                '200':
                    description: School deleted successfully.
                    content:
                        application/json:
                            examples:
                                success:
                                    summary: Successful Response
                                    value:
                                        ok: boolean
                                        data:
                                            _id: string
                                            slug: string
                                            name: string
                                            desc: string
                                            administrators:
                                                type: array
                                                items:
                                                    type: string
                                            createdAt: string
                                            updatedAt: string
                                        errors: []
                                        message: string
                '400 - 499':
                    description: School deletion failed.
                    content:
                        application/json:
                            examples:
                                failure:
                                    summary: Failure Response
                                    value:
                                        ok: boolean
                                        data: {}
                                        errors:
                                            oneOf:
                                                - [string]
                                                - string
                                        message: string
            security:
                - tokenAuth: []
    #####################
    # Classroom Endpoints
    #####################
    /api/classroom/createClassroom:
        post:
            tags:
                - Classroom
            summary: Create Classroom
            description: Creates a new classroom within a school.
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                name:
                                    type: string
                                capacity:
                                    type: integer
                                school:
                                    type: string
                                courses:
                                    type: array
                                    items:
                                        type: string
                            required:
                                - name
                                - capacity
                                - school
            responses:
                '200':
                    description: Classroom created successfully.
                    content:
                        application/json:
                            examples:
                                success:
                                    summary: Successful Response
                                    value:
                                        ok: boolean
                                        data:
                                            _id: string
                                            slug: string
                                            name: string
                                            capacity:
                                                type: integer
                                            school: string
                                            courses:
                                                type: array
                                                items:
                                                    type: string
                                            students: []
                                            createdAt: string
                                            updatedAt: string
                                        errors: []
                                        message: string
                '400 - 499':
                    description: Classroom creation failed.
                    content:
                        application/json:
                            examples:
                                failure:
                                    summary: Failure Response
                                    value:
                                        ok: boolean
                                        data: {}
                                        errors:
                                            oneOf:
                                                - [string]
                                                - string
                                        message: string
            security:
                - tokenAuth: []
    /api/classroom/getClassrooms:
        get:
            tags:
                - Classroom
            summary: Get All Classrooms in a School
            description: Retrieves a list of classrooms in a specified school.
            parameters:
                - in: query
                  name: school
                  schema:
                      type: string
                  required: true
                  description: School ID.
            responses:
                '200':
                    description: List of classrooms retrieval successful.
                    content:
                        application/json:
                            examples:
                                success:
                                    summary: Successful Response
                                    value:
                                        ok: boolean
                                        data:
                                            type: array
                                            items:
                                                _id: string
                                                slug: string
                                                name: string
                                                capacity:
                                                    type: integer
                                                school: string
                                                courses:
                                                    type: array
                                                    items:
                                                        type: string
                                                students: []
                                                createdAt: string
                                                updatedAt: string
                                        errors: []
                                        message: string
                '400 - 499':
                    description: Classroom list retrieval failed.
                    content:
                        application/json:
                            examples:
                                failure:
                                    summary: Failure Response
                                    value:
                                        ok: boolean
                                        data: {}
                                        errors:
                                            oneOf:
                                                - [string]
                                                - string
                                        message: string
            security:
                - tokenAuth: []
    /api/classroom/findClassroom:
        get:
            tags:
                - Classroom
            summary: Find Classroom by Slug and School
            description: Fetches details of a classroom using its slug and school ID.
            parameters:
                - in: query
                  name: slug
                  schema:
                      type: string
                  required: true
                  description: Slug of the classroom.
                - in: query
                  name: school
                  schema:
                      type: string
                  required: true
                  description: School ID.
            responses:
                '200':
                    description: Classroom details retrieval successful.
                    content:
                        application/json:
                            examples:
                                success:
                                    summary: Successful Response
                                    value:
                                        ok: boolean
                                        data:
                                            _id: string
                                            slug: string
                                            name: string
                                            capacity:
                                                type: integer
                                            school: string
                                            courses:
                                                type: array
                                                items:
                                                    type: string
                                            students: []
                                            createdAt: string
                                            updatedAt: string
                                        errors: []
                                        message: string
                '400 - 499':
                    description: Classroom details retrieval failed.
                    content:
                        application/json:
                            examples:
                                failure:
                                    summary: Failure Response
                                    value:
                                        ok: boolean
                                        data: {}
                                        errors:
                                            oneOf:
                                                - [string]
                                                - string
                                        message: string
            security:
                - tokenAuth: []
    /api/classroom/updateClassroom:
        patch:
            tags:
                - Classroom
            summary: Update Classroom Details
            description: Updates the details of a specific classroom.
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                id:
                                    type: string
                                school:
                                    type: string
                                name:
                                    type: string
                                capacity:
                                    type: integer
                                courses:
                                    type: array
                                    items:
                                        type: string
                            required:
                                - id
                                - school
            responses:
                '200':
                    description: Classroom updated successfully.
                    content:
                        application/json:
                            examples:
                                success:
                                    summary: Successful Response
                                    value:
                                        ok: boolean
                                        data:
                                            _id: string
                                            slug: string
                                            name: string
                                            capacity:
                                                type: integer
                                            school: string
                                            courses:
                                                type: array
                                                items:
                                                    type: string
                                            students: []
                                            createdAt: string
                                            updatedAt: string
                                        errors: []
                                        message: string
                '400 - 499':
                    description: Classroom update failed.
                    content:
                        application/json:
                            examples:
                                failure:
                                    summary: Failure Response
                                    value:
                                        ok: boolean
                                        data: {}
                                        errors:
                                            oneOf:
                                                - [string]
                                                - string
                                        message: string
            security:
                - tokenAuth: []
    #####################
    # Student Endpoints
    #####################
    /api/student/enrollStudent:
        post:
            tags:
                - Student
            summary: Enroll Student in a Classroom
            description: Adds a student to a classroom along with their course selections.
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                user:
                                    type: string
                                classroom:
                                    type: string
                                courses:
                                    type: array
                                    items:
                                        type: string
                            required:
                                - user
                                - classroom
            responses:
                '200':
                    description: Student enrolled successfully.
                    content:
                        application/json:
                            examples:
                                success:
                                    summary: Successful Response
                                    value:
                                        ok: boolean
                                        data:
                                            _id: string
                                            user: string
                                            classroom: string
                                            courses:
                                                type: array
                                                items:
                                                    type: string
                                            createdAt: string
                                            updatedAt: string
                                        errors: []
                                        message: string
                '400 - 499':
                    description: Student enrollment failed.
                    content:
                        application/json:
                            examples:
                                failure:
                                    summary: Failure Response
                                    value:
                                        ok: boolean
                                        data: {}
                                        errors:
                                            oneOf:
                                                - [string]
                                                - string
                                        message: string
            security:
                - tokenAuth: []
    /api/student/updateStudentProfile:
        patch:
            tags:
                - Student
            summary: Update Student Profile
            description: Modifies a student's profile information.
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                user:
                                    type: string
                                name:
                                    type: string
                                email:
                                    type: string
                                courses:
                                    type: array
                                    items:
                                        type: string
                            required:
                                - user
            responses:
                '200':
                    description: Student profile updated successfully.
                    content:
                        application/json:
                            examples:
                                success:
                                    summary: Successful Response
                                    value:
                                        ok: boolean
                                        data:
                                            _id: string
                                            user: string
                                            classroom: string
                                            courses:
                                                type: array
                                                items:
                                                    type: string
                                            createdAt: string
                                            updatedAt: string
                                        errors: []
                                        message: string
                '400 - 499':
                    description: Student profile update failed.
                    content:
                        application/json:
                            examples:
                                failure:
                                    summary: Failure Response
                                    value:
                                        ok: boolean
                                        data: {}
                                        errors:
                                            oneOf:
                                                - [string]
                                                - string
                                        message: string

            security:
                - tokenAuth: []
    /api/student/transferStudent:
        patch:
            tags:
                - Student
            summary: Transfer Student to Another Classroom
            description: Moves a student from one classroom to another.
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                user:
                                    type: string
                                school:
                                    type: string
                                classroom:
                                    type: string
                                newClassroom:
                                    type: string
                                courses:
                                    type: array
                                    items:
                                        type: string
                            required:
                                - user
                                - school
                                - classroom
                                - newClassroom
            responses:
                '200':
                    description: Student transferred successfully.
                    content:
                        application/json:
                            examples:
                                success:
                                    summary: Successful Response
                                    value:
                                        ok: boolean
                                        data:
                                            _id: string
                                            user: string
                                            classroom: string
                                            courses:
                                                type: array
                                                items:
                                                    type: string
                                            createdAt: string
                                            updatedAt: string
                                        errors: []
                                        message: string
                '400 - 499':
                    description: Student transfer failed.
                    content:
                        application/json:
                            examples:
                                failure:
                                    summary: Failure Response
                                    value:
                                        ok: boolean
                                        data: {}
                                        errors:
                                            oneOf:
                                                - [string]
                                                - string
                                        message: string
            security:
                - tokenAuth: []
